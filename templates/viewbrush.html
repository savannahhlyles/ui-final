{% extends "layout.html" %}

{% block head %}
  {{ super() }}
  <style>
    /* Overall container */
    .view-container {
      padding: 2rem;
      background: #f6f2ec;
    }
    /* Left column: preview */
    .preview-card img {
      cursor: move;
      max-width: 100%;
    }
    /* Center column: drop area */
    .drop-zone {
      position: relative;
      width: 100%;
      padding-top: 100%; /* 1:1 aspect ratio */
      border: 2px dashed #333;
      background: #fff;
      transition: background .2s, border-color .2s;
    }
    .drop-zone.highlight {
      background: #e7f1ff;
      border-color: #007bff;
    }
    .drop-zone > img {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      object-fit: contain;
    }
    /* Right column: tips */
    .tips {
      display: none;
      flex-direction: column;
      gap: 1rem;
    }
    .tips.visible {
      display: flex;
    }
    .tip {
      background: #ccc;
      padding: 0.75rem 1rem;
      border-radius: 0.5rem;
      font-weight: 600;
      color: #111;
    }
  </style>
{% endblock %}

{% block content %}
<div class="container-fluid view-container">
  <div class="row">
    <!-- Left: Brush preview + description -->
    <div class="col-md-3 preview-card text-center">
      <h4>{{ brush.name }}</h4>
      <img
        id="draggable"
        src="{{ url_for('static', filename='media/' ~ brush.img) }}"
        alt="{{ brush.name }}"
        data-reveal-url="{{ url_for('static', filename='media/' ~ brush.reveal_img) }}"
      >
      <p class="mt-3">{{ brush.description }}</p>
    </div>

    <!-- Center: Drop-to-reveal -->
    <div class="col-md-6 text-center">
      <h2>Explore the Sketch</h2>
      <div id="droppable" class="drop-zone mt-3 mb-3">
        <p style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);">
          Drop here to reveal
        </p>
      </div>
    </div>

    <!-- Right: Tips (hidden until drop) -->
    <div class="col-md-3">
      <div id="tips" class="tips">
        <div class="tip">Use for Painterly Texture and Blending</div>
        <div class="tip">Build Up Color in Layers</div>
        <div class="tip">Try Smudging for a Blended Look</div>
      </div>
    </div>
  </div>

  <!-- Navigation -->
  <div class="row mt-4">
    <div class="col text-left">
      <a href="{{ url_for('learn') }}" class="btn btn-light btn-lg shadow">← Back</a>
    </div>
    <div class="col text-right">
      {% if next_brush_id %}
        <a href="{{ url_for('view_brush', brush_id=next_brush_id) }}"
           class="btn btn-light btn-lg shadow">Next Brush →</a>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
  <script src="{{ url_for('static', filename='js/learn.js') }}"></script>
{% endblock %}
